var COMPILED=!0,goog=goog||{};goog.global=this;goog.exportPath_=function(a,b,c){a=a.split(".");c=c||goog.global;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c=c[d]?c[d]:c[d]={}:c[d]=b};goog.define=function(a,b){var c=b;COMPILED||goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,a)&&(c=goog.global.CLOSURE_DEFINES[a]);goog.exportPath_(a,c)};goog.DEBUG=!0;goog.LOCALE="en";goog.TRUSTED_SITE=!0;
goog.provide=function(a){if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a];for(var b=a;(b=b.substring(0,b.lastIndexOf(".")))&&!goog.getObjectByName(b);)goog.implicitNamespaces_[b]=!0}goog.exportPath_(a)};goog.setTestOnly=function(a){if(COMPILED&&!goog.DEBUG)throw a=a||"",Error("Importing test-only code into non-debug environment"+a?": "+a:".");};
COMPILED||(goog.isProvided_=function(a){return!goog.implicitNamespaces_[a]&&!!goog.getObjectByName(a)},goog.implicitNamespaces_={});goog.getObjectByName=function(a,b){for(var c=a.split("."),d=b||goog.global,e;e=c.shift();)if(goog.isDefAndNotNull(d[e]))d=d[e];else return null;return d};goog.globalize=function(a,b){var c=b||goog.global,d;for(d in a)c[d]=a[d]};
goog.addDependency=function(a,b,c){if(goog.DEPENDENCIES_ENABLED){var d;a=a.replace(/\\/g,"/");for(var e=goog.dependencies_,g=0;d=b[g];g++)e.nameToPath[d]=a,a in e.pathToNames||(e.pathToNames[a]={}),e.pathToNames[a][d]=!0;for(d=0;b=c[d];d++)a in e.requires||(e.requires[a]={}),e.requires[a][b]=!0}};goog.ENABLE_DEBUG_LOADER=!0;
goog.require=function(a){if(!COMPILED&&!goog.isProvided_(a)){if(goog.ENABLE_DEBUG_LOADER){var b=goog.getPathFromDeps_(a);if(b){goog.included_[b]=!0;goog.writeScripts_();return}}a="goog.require could not find: "+a;goog.global.console&&goog.global.console.error(a);throw Error(a);}};goog.basePath="";goog.nullFunction=function(){};goog.identityFunction=function(a,b){return a};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};
goog.addSingletonGetter=function(a){a.getInstance=function(){if(a.instance_)return a.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a);return a.instance_=new a}};goog.instantiatedSingletons_=[];goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;
goog.DEPENDENCIES_ENABLED&&(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var a=goog.global.document;return"undefined"!=typeof a&&"write"in a},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var a=goog.global.document.getElementsByTagName("script"),b=a.length-1;0<=b;--b){var c=a[b].src,d=c.lastIndexOf("?"),d=-1==d?c.length:
d;if("base.js"==c.substr(d-7,7)){goog.basePath=c.substr(0,d-7);break}}},goog.importScript_=function(a){var b=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[a]&&b(a)&&(goog.dependencies_.written[a]=!0)},goog.writeScriptTag_=function(a){if(goog.inHtmlDocument_()){var b=goog.global.document;if("complete"==b.readyState){if(/\bdeps.js$/.test(a))return!1;throw Error('Cannot write "'+a+'" after document load');}b.write('<script type="text/javascript" src="'+a+'">\x3c/script>');
return!0}return!1},goog.writeScripts_=function(){function a(e){if(!(e in d.written)){if(!(e in d.visited)&&(d.visited[e]=!0,e in d.requires))for(var f in d.requires[e])if(!goog.isProvided_(f))if(f in d.nameToPath)a(d.nameToPath[f]);else throw Error("Undefined nameToPath for "+f);e in c||(c[e]=!0,b.push(e))}}var b=[],c={},d=goog.dependencies_,e;for(e in goog.included_)d.written[e]||a(e);for(e=0;e<b.length;e++)if(b[e])goog.importScript_(goog.basePath+b[e]);else throw Error("Undefined script input");
},goog.getPathFromDeps_=function(a){return a in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[a]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));
goog.typeOf=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b};goog.isDef=function(a){return void 0!==a};goog.isNull=function(a){return null===a};goog.isDefAndNotNull=function(a){return null!=a};goog.isArray=function(a){return"array"==goog.typeOf(a)};goog.isArrayLike=function(a){var b=goog.typeOf(a);return"array"==b||"object"==b&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};goog.isString=function(a){return"string"==typeof a};
goog.isBoolean=function(a){return"boolean"==typeof a};goog.isNumber=function(a){return"number"==typeof a};goog.isFunction=function(a){return"function"==goog.typeOf(a)};goog.isObject=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.removeUid=function(a){"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(b){}};
goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var b=goog.typeOf(a);if("object"==b||"array"==b){if(a.clone)return a.clone();var b="array"==b?[]:{},c;for(c in a)b[c]=goog.cloneObject(a[c]);return b}return a};goog.bindNative_=function(a,b,c){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}};goog.bind=function(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}};goog.mixin=function(a,b){for(var c in b)a[c]=b[c]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval)if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(a);else{var b=goog.global.document,c=b.createElement("script");c.type="text/javascript";c.defer=!1;c.appendChild(b.createTextNode(a));b.body.appendChild(c);
b.body.removeChild(c)}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(a,b){var c=function(a){return goog.cssNameMapping_[a]||a},d=function(a){a=a.split("-");for(var b=[],d=0;d<a.length;d++)b.push(c(a[d]));return b.join("-")},d=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?c:d:function(a){return a};return b?a+"-"+d(b):d(a)};goog.setCssNameMapping=function(a,b){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=b};
!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(a,b){var c=b||{},d;for(d in c){var e=(""+c[d]).replace(/\$/g,"$$$$");a=a.replace(new RegExp("\\{\\$"+d+"\\}","gi"),e)}return a};goog.getMsgWithFallback=function(a,b){return a};goog.exportSymbol=function(a,b,c){goog.exportPath_(a,b,c)};goog.exportProperty=function(a,b,c){a[b]=c};
goog.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a};
goog.base=function(a,b,c){var d=arguments.callee.caller;if(goog.DEBUG&&!d)throw Error("arguments.caller not defined.  goog.base() expects not to be running in strict mode. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(d.superClass_)return d.superClass_.constructor.apply(a,Array.prototype.slice.call(arguments,1));for(var e=Array.prototype.slice.call(arguments,2),g=!1,f=a.constructor;f;f=f.superClass_&&f.superClass_.constructor)if(f.prototype[b]===d)g=!0;else if(g)return f.prototype[b].apply(a,
e);if(a[b]===d)return a.constructor.prototype[b].apply(a,e);throw Error("goog.base called from a method of one name to a method of a different name");};goog.scope=function(a){a.call(goog.global)};Framework={templateCache:{},CACHE_TEMPLATES:!1};Framework.BaseView=Backbone.View.extend({template:null,isRendered:!1,snippets:{},_killChildren:function(){for(var a in this.viewsSack)this.viewsSack[a].destroy()},_terminateAllActiveXHRs:function(){if(this._xhrs){for(var a=0,b=this._xhrs.length;a<b;a++)this._xhrs[a].abort();this._xhrs=null}},_getParameters:function(a){a=a.split("?");a=1<a.length?a[1]:a[0];a=a.split("#");a=1<a.length?a[1]:a[0];a=a.split("&");for(var b={},c=0,d=a.length;c<d;c++){var e=a[c].split("=");b[e[0]]=e[1]}return b},_diff:function(a,
b){var c={},d;for(d in b)if(!a[d]||a[d]!=b[d])try{c[d]=decodeURI(b[d])}catch(e){c[d]=b[d]}for(d in a)b[d]||(c[d]=null);return c},initialize:function(a){this.viewsSack={};a||(a={});this._options=a;if(this.onHashChange)$(window).on("hashchange."+this.cid,function(a){var b=a.originalEvent;a=b.oldURL;b=this._getParameters(b.newURL);a=this._getParameters(a);a=this._diff(a,b);this.onHashChange(a)}.bind(this));if(this.parameterSchema)for(var b in this.parameterSchema)this[this.parameterSchema[b]]=this.getParameter(b);
_.bindAll(this,"render","destroy");var c=this;this.render=_.wrap(this.render,function(a,b){c._beforeRender();a(b);c.afterRender();return c});this.destroy=_.wrap(this.destroy,function(a,b,g,f){c._beforeDestroy();a(b,g,f);return c})},_renderView:function(a,b){this._terminateAllActiveXHRs();var c=function(c,d){b=b?b:{};b._this=this;b._options=this._options;this._preloadData=d;b._preloadData=d;this.$el.html(_.template(c)(b));this.render();a&&a()}.bind(this);if(null!=this.template)if(Framework.templateCache[this.template])this.preloadDataAsync(function(a){c(Framework.templateCache[this.template],
a)},function(){c("ERROR in preloadDataAsync",{})});else{var d=function(a){Framework.CACHE_TEMPLATES&&(Framework.templateCache[this.template]=a);this.preloadDataAsync(function(b){c(a,b)},function(){c("ERROR in preloadDataAsync",{})})}.bind(this);$.ajax({url:this.template,method:"GET",success:d,error:function(a){this.$el.html("template ["+this.template+"] failed to load.")}.bind(this)})}else this.preloadDataAsync(function(a){this.render()}.bind(this),function(){this.$el.html("ERROR in preloadDataAsync")}.bind(this)),
a&&a()},render:function(){return this},afterRender:function(){this.isRendered=!0},_beforeRender:function(){},_beforeDestroy:function(){}});goog.exportSymbol("Framework.BaseView",Framework.BaseView);Framework.BaseView.prototype.getJSON=function(a,b,c,d){this._xhrs||(this._xhrs=[]);a=$.ajax({headers:{Accept:"application/json"},cache:!1,contentType:"application/json",type:"GET",processData:!1,url:a,success:b,error:c});this._xhrs.push(a)};goog.exportProperty(Framework.BaseView.prototype,"getJSON",Framework.BaseView.prototype.getJSON);
Framework.BaseView.prototype.loadingTemplate=null;goog.exportProperty(Framework.BaseView.prototype,"loadingTemplate",Framework.BaseView.prototype.loadingTemplate);Framework.BaseView.prototype.getParameter=function(a){var b=location.hash;if(0==b.length)return null;for(var b=b.substr(1).split("&"),c=0,d=b.length;c<d;c++){var e=b[c].split("=");if(e[0]==a)try{return decodeURI(e[1])}catch(g){return e[1]}}return null};goog.exportProperty(Framework.BaseView.prototype,"getParameter",Framework.BaseView.prototype.getParameter);
Framework.BaseView.prototype.setParameter=function(a,b){location.hash=this._getNewHash(location.hash,a,b)};goog.exportProperty(Framework.BaseView.prototype,"setParameter",Framework.BaseView.prototype.setParameter);Framework.BaseView.prototype.setParameters=function(a){var b=location.hash,c;for(c in a)b=this._getNewHash(b,c,a[c]);location.hash=b};goog.exportProperty(Framework.BaseView.prototype,"setParameters",Framework.BaseView.prototype.setParameters);
Framework.BaseView.prototype._getNewHash=function(a,b,c){c=encodeURI(c);0==a.length&&(a="#");a=a.substr(1).split("&");""==a[0]&&(a=[]);for(var d=!1,e=0,g=a.length;e<g;e++)if(a[e].split("=")[0]==b){a[e]=c?b+"="+c:"";d=!0;break}!d&&c&&a.push(b+"="+c);b=[];e=0;for(g=a.length;e<g;e++)a[e]&&b.push(a[e]);return"#"+b.join("&")};
Framework.BaseView.prototype.destroy=function(){this._terminateAllActiveXHRs();this._killChildren();this.onHashChange&&$(window).off("hashchange."+this.cid);this.undelegateEvents();this._parent&&this._parent.viewsSack[this.cid]&&delete this._parent.viewsSack[this.cid];this.$el.removeData().unbind();this.doNotKillDiv?(this.$el.empty(),this.stopListening()):this.remove();this.trigger("destroy",this)};goog.exportProperty(Framework.BaseView.prototype,"destroy",Framework.BaseView.prototype.destroy);
Framework.BaseView.prototype.renderView=function(a,b){this._loadSnippets(function(){this.loadingMessage?(this.$el.html(this.loadingMessage),this._renderView(a,b)):this.overlayClass?(this.$("."+this.overlayClass).remove(),this.$el.append('<div class="'+this.overlayClass+'"></div>'),this._renderView(a,b)):this.loadingTemplate?Framework.templateCache[this.loadingTemplate]?(this.$el.html(Framework.templateCache[this.loadingTemplate]),this._renderView(a,b)):(this.$el.html(""),$.ajax({url:this.loadingTemplate,
method:"GET",success:function(c){Framework.templateCache[this.loadingTemplate]=c;this.renderView(a,b)}.bind(this),error:function(c){Framework.templateCache[this.loadingTemplate]="Loading Template ["+this.loadingTemplate+"] failed to load.";this.renderView(a,b)}.bind(this)})):this._renderView(a,b)}.bind(this))};goog.exportProperty(Framework.BaseView.prototype,"renderView",Framework.BaseView.prototype.renderView);
Framework.BaseView.prototype.snippet=function(a,b){var c=this.snippets[a];if(c)return _.template(Framework.templateCache[c])(b);throw"error: snippet "+a+" is not declared in the prototype.";};
Framework.BaseView.prototype._loadSnippets=function(a){var b=_.keys(this.snippets).length;if(0==b)a();else{var c=function(){b--;0>=b&&a()},d;for(d in this.snippets){var e=this.snippets[d];Framework.templateCache[e]?c():$.ajax({url:e,method:"GET",success:function(a){Framework.templateCache[e]=a;c()}.bind(this),error:function(a){Framework.templateCache[e]="Loading Template ["+e+"] failed to load.";c()}.bind(this)})}}};
Framework.BaseView.prototype.instantiate=function(a,b){b=b?b:{};var c=new a(b);this.viewsSack[c.cid]=c;c._parent=this;return c};goog.exportProperty(Framework.BaseView.prototype,"instantiate",Framework.BaseView.prototype.instantiate);Framework.BaseView.prototype.getParent=function(){return this._parent};goog.exportProperty(Framework.BaseView.prototype,"getParent",Framework.BaseView.prototype.getParent);Framework.BaseView.prototype.getChildren=function(){return this.viewsSack};
goog.exportProperty(Framework.BaseView.prototype,"getChildren",Framework.BaseView.prototype.getChildren);Framework.BaseView.prototype.preloadDataAsync=function(a,b){a({})};Framework.AbstractConstraintModel=Backbone.View.extend({type:"GET",initialize:function(){this.constraints={}},getJSONString:function(){return JSON.stringify(this.constraints)},setFromJSONString:function(a){this.constraints=JSON.parse(a)},mergeConstraints:function(a,b){for(var c in b){var d=b[c];a[c]="number"===typeof d||"string"===typeof d||"boolean"===typeof d?d:d instanceof Array?a[c]?a[c].concat(d):d:a[c]?_.extend(a[c],d):d}return a}});goog.exportSymbol("Framework.AbstractConstraintModel",Framework.AbstractConstraintModel);
Framework.PostConstraintModel=Framework.AbstractConstraintModel.extend({type:"POST"});goog.exportSymbol("Framework.PostConstraintModel",Framework.PostConstraintModel);Framework.PostConstraintModel.prototype.getBody=function(){throw"must override getBody";};goog.exportProperty(Framework.PostConstraintModel.prototype,"getBody",Framework.PostConstraintModel.prototype.getBody);
Framework.AbstractConstraintModel.prototype.union=function(a){var b=new this.constructor;b.constraints=this.mergeConstraints(b.constraints,this.constraints);b.constraints=this.mergeConstraints(b.constraints,a.constraints);return b};goog.exportProperty(Framework.AbstractConstraintModel.prototype,"union",Framework.AbstractConstraintModel.prototype.union);Framework.AbstractConstraintModel.prototype.setField=function(a,b){this.constraints[a]=b;null===b&&delete this.constraints[a]};
goog.exportProperty(Framework.AbstractConstraintModel.prototype,"setField",Framework.AbstractConstraintModel.prototype.setField);Framework.AbstractConstraintModel.prototype.getField=function(a){return this.constraints[a]};goog.exportProperty(Framework.AbstractConstraintModel.prototype,"getField",Framework.AbstractConstraintModel.prototype.getField);Framework.AbstractConstraintModel.prototype.getUrl=function(){return"override me, refer to API for more help"};
Framework.AbstractConstraintModel.prototype.defaultPageNumber=0;Framework.AbstractConstraintModel.prototype.defaultPageSize=10;Framework.AbstractConstraintModel.prototype.getPageNumber=function(){var a=this.getField("pageNumber");return void 0===a?this.defaultPageNumber:a};Framework.AbstractConstraintModel.prototype.getPageSize=function(){var a=this.getField("pageSize");return void 0===a?this.defaultPageSize:a};
Framework.AbstractConstraintModel.prototype.setPageNumber=function(a){this.setField("pageNumber",a)};Framework.AbstractConstraintModel.prototype.setPageSize=function(a){this.setField("pageSize",a)};Framework.AbstractConstraintPanel=Framework.BaseView.extend({initialize:function(a){Framework.BaseView.prototype.initialize.call(this,a);this.source=a.source;this.source.subscribe(this);this.listenTo(this.source,"source:change",this.renderView)},destroy:function(){this.source.unsubscribe(this);Framework.BaseView.prototype.destroy.call(this)}});goog.exportSymbol("Framework.AbstractConstraintPanel",Framework.AbstractConstraintPanel);
Framework.AbstractConstraintPanel.prototype.preloadDataAsync=function(a){var b=this.source.getConstraintModel();a(b)};Framework.AbstractConstraintPanel.prototype.getConstraintModel=function(){return new this.source.ConstraintModelPrototype};Framework.AbstractConstraintPanel.prototype.getSource=function(){return this.source};goog.exportProperty(Framework.AbstractConstraintPanel.prototype,"getSource",Framework.AbstractConstraintPanel.prototype.getSource);
Framework.AbstractConstraintPanel.prototype.onConstraintChange=function(){this.trigger("constraintPanel:changed",this)};goog.exportProperty(Framework.AbstractConstraintPanel.prototype,"onConstraintChange",Framework.AbstractConstraintPanel.prototype.onConstraintChange);Framework.PaginationPanel=Framework.AbstractConstraintPanel.extend({middleEntries:4,edgeEntries:2,events:{"click .fw-pagination-btn":"onPaginationBtn"},getInterval:function(a,b){var c=Math.ceil(this.middleEntries/2),d=b-this.middleEntries;return[a>c?Math.max(Math.min(a-c,d),0):0,a>c?Math.min(a+c,b):Math.min(this.middleEntries,b)]},onPaginationBtn:function(a){a=$(a.currentTarget).data("page");var b=new this.source.ConstraintModelPrototype;b.setPageNumber(a);this.trigger("constraint:append",b)},reset:function(){}});
goog.exportSymbol("Framework.PaginationPanel",Framework.PaginationPanel);
Framework.PaginationPanel.prototype.preloadDataAsync=function(a){this.source.get(function(){var b=this.source.getConstraintModel(),c={};c.pageSize=b.getPageSize();c.pageNumber=b.getPageNumber();c.count=this.source.count;c.totalPages=Math.ceil(c.count/c.pageSize);var b=this.getInterval(c.pageNumber,c.totalPages),d=!1,e=[],g=this.edgeEntries;this.edgeEntries>=b[0]&&(d=!0,g=b[1]);for(var f=0,h=g;f<h;f++)e.push(f);g=[];h=f=c.totalPages-this.edgeEntries;f<=b[1]&&(d=!0,h=b[0]);f=h;for(h=c.totalPages;f<
h;f++)g.push(f);var k=[];if(e[e.length-1]>=g[0])for(e=[],g=[],f=0,h=c.totalPages;f<h;f++)k.push(f);else if(!d)for(f=b[0],h=b[1];f<h;f++)k.push(f);c.left=e;c.right=g;c.middle=k;c.hasNext=c.pageNumber<c.totalPages;c.next=c.pageNumber+1;c.hasPrevious=0<c.pageNumber;c.previous=c.pageNumber-1;c.beginStr=c.pageNumber*c.pageSize+1;c.endStr=c.beginStr+c.pageSize-1;c.endStr=c.endStr>c.count?c.count:c.endStr;a(c)}.bind(this))};Framework.ScrollPaginationPanel=Framework.PaginationPanel.extend({});Framework.RestSource=Framework.BaseView.extend({dataType:"json",url:null,initialize:function(a){Framework.BaseView.prototype.initialize.call(this,a);this.constraintModel=new this.ConstraintModelPrototype;this.constraintPanels={};this.callbackQueues={};this.cache={};this.countcache={};this._loading={};this.noCache=!1;if(!this.url)throw"this.url must be defined";},subscribe:function(a){this.constraintPanels[a.cid]=a;a instanceof Framework.ScrollPaginationPanel&&(this._contineous=!0);this.listenTo(a,
"constraint:append",function(b){this.onConstraintAppend(b,a,!1)}.bind(this));this.listenTo(a,"constraint:replace",function(b){this.onConstraintAppend(b,a,!0)}.bind(this))},onConstraintAppend:function(a,b,c){var d=null;c?d=a:(d=this.getConstraintModel(),d=d.union(a));b instanceof Framework.PaginationPanel||(d.setPageNumber(null),this._cwrapperdata=null);this.setConstraintModel(d)},unsubscribe:function(a){delete this.constraintPanels[a.cid]},clearCache:function(){this.cache={}},_triggerChange:function(){this.getConstraintModel().getPageNumber()||
(this._cwrapperdata=null);this.trigger("source:change")},onHashChange:function(a){this.persistBy&&a[this.persistBy]&&this._triggerChange()},setConstraintModel:function(a){this.persistBy&&this.setParameter("cm",a.getJSONString())},getCount:function(){return this.count},getAll:function(a,b,c){a="";(this.constraintModel=this.getConstraintModel())&&"GET"==this.ConstraintModelPrototype.prototype.type&&(a="?"+this.constraintModel.getUrl());var d=this.url+a;this.countcache[d]&&(this.count=this.countcache[d]);
null==this.cache[d]||this._lastPayload&&this._lastPayload!=this.payload?this._loading[d]?(this.callbackQueues[d]||(this.callbackQueues[d]=[]),this.callbackQueues[d].push(b)):(this._loading[d]=!0,this.callbackQueues[d]=[],this.callbackQueues[d].push(b),this._xhr&&(this._xhr.url&&(this.callbackQueues[d]=this.callbackQueues[this._xhr.url].concat(this.callbackQueues[d]),delete this.callbackQueues[this._xhr.url]),this._xhr.abort()),this._xhr=$.ajax({headers:{Accept:"application/json"},cache:!1,contentType:"application/json",
type:this.constraintType,processData:!1,url:d,dataType:this.dataType,data:this.payload,success:function(a){var b=function(a){this._loading[d]=!1;this._contineous&&(this._cwrapperdata||(this._cwrapperdata=[]),a=this._cwrapperdata=this._cwrapperdata.concat(a));this._lastPayload=this.payload;this.noCache||(this.cache[d]=a,this.countcache[d]=this.count);for(var b=0,c=this.callbackQueues[d].length;b<c;b++)this.callbackQueues[d][b](a);this.callbackQueues[d]=[]}.bind(this);this.parseAsync(a,function(a){b(a)}.bind(this))}.bind(this),
error:function(a){this._loading[d]=!1;"abort"!=a.statusText&&c&&c(a)}.bind(this)}),this._xhr.url=d):b(this.cache[d])},refresh:function(){this.cache={};this.trigger("source:change")}});goog.exportSymbol("Framework.RestSource",Framework.RestSource);Framework.RestSource.prototype.getConstraintModel=function(){if(this.persistBy){var a=this.getParameter("cm"),b=new this.ConstraintModelPrototype;b.setFromJSONString(a);return b}return this.constraintModel};
goog.exportProperty(Framework.RestSource.prototype,"getConstraintModel",Framework.RestSource.prototype.getConstraintModel);Framework.RestSource.prototype.ConstraintModelPrototype=Framework.AbstractConstraintModel;Framework.RestSource.prototype.get=function(a,b){this.getAll(null,a,b)};goog.exportProperty(Framework.RestSource.prototype,"get",Framework.RestSource.prototype.get);Framework.RestSource.prototype.setCount=function(a){this.count=a};
goog.exportProperty(Framework.RestSource.prototype,"setCount",Framework.RestSource.prototype.setCount);Framework.RestSource.prototype.getCount=function(){return this.count};goog.exportProperty(Framework.RestSource.prototype,"getCount",Framework.RestSource.prototype.getCount);Framework.RestSource.prototype.parseAsync=function(a,b){b(a)};Framework.TabView=Framework.BaseView.extend({initialize:function(a){Framework.BaseView.prototype.initialize.call(this,a);this._tabMap={}},events:function(){var a={};a['click .fw-tab-toggle[data-cid="'+this.cid+'"]']="otc";return a},onHashChange:function(a){this.persistBy&&a[this.persistBy]&&this._change(a[this.persistBy])},_tabChange:function(a){a=$(a.currentTarget)[0].id;this.persistBy&&this.setParameter(this.persistBy,a);this._change(a);this.trigger("tab:"+a)},_change:function(a){var b=this.$('.fw-tab-toggle[data-cid="'+
this.cid+'"]#'+a),c=b.data("viewconstructor"),d=this.$('.fw-tab-content[data-cid="'+this.cid+'"][data-id="'+a+'"]'),e=this.$('.fw-tab-content[data-cid="'+this.cid+'"][data-for="'+a+'"]');if(0==d.length)throw"corresponding div does not exist for id "+a;this.$('.fw-tab-toggle[data-cid="'+this.cid+'"]').removeClass("active");b.addClass("active");this.$('.fw-tab-content[data-cid="'+this.cid+'"]').hide();d.show();e.show();if(!this._tabMap[a]){this._tabMap[a]=!0;b=null;if(c&&window[c])b=window[c];else throw"constructor "+
c+" does not exist";this["content_"+a]=this.instantiate(b,{});this["content_"+a].setElement(d).renderView()}},render:function(){this.$(".fw-tab-content").attr("data-cid",this.cid);this.$(".fw-tab-toggle").attr("data-cid",this.cid);this.$('.fw-tab-content[data-cid="'+this.cid+'"]').hide();this.persistBy&&this.getParameter(this.persistBy)?this.setTabById(this.getParameter(this.persistBy)):(this.$('.fw-tab-toggle[data-cid="'+this.cid+'"].active').click(),this._options.openTab&&this.setTabById(this._options.openTab))}});
goog.exportSymbol("Framework.TabView",Framework.TabView);Framework.TabView.prototype.otc=function(a){this._tabChange(a);a.stopImmediatePropagation();a.preventDefault();a.stopPropagation()};Framework.TabView.prototype.setTabByIndex=function(a){this.$(this.$(".fw-tab-toggle")[a]).click()};goog.exportProperty(Framework.TabView.prototype,"setTabByIndex",Framework.TabView.prototype.setTabByIndex);Framework.TabView.prototype.setTabById=function(a){this.$(".fw-tab-toggle#"+a).click()};
goog.exportProperty(Framework.TabView.prototype,"setTabById",Framework.TabView.prototype.setTabById);Framework.Viewer=Framework.AbstractConstraintPanel.extend({initialize:function(a){Framework.AbstractConstraintPanel.prototype.initialize.call(this,a);this.preloadDataAsync=this.source.get.bind(this.source)}});goog.exportSymbol("Framework.Viewer",Framework.Viewer);
